<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HỒNG CUTI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="stylesheet" href="https://use.typekit.net/trt3ngp.css">
  <link rel="stylesheet" href="style.css?v=24">
</head>
<body>
  <canvas class="webgl"></canvas>
  <h1 class="h1text">Hồng Cuti</h1>
  <div id="love-text-left" class="love-text-container">
  <p class="love-text-content">Anh yêu em không vì điều gì lớn lao, chỉ vì ở cạnh em, anh thấy cuộc sống ấm áp hơn. 
                                Em là lý do khiến anh muốn tốt hơn mỗi ngày.</p>
  </div>
  <div id="love-text-right" class="love-text-container">
  <p class="love-text-content">Yêu em, anh thấy lòng bình yên lạ. 
                                Mỗi khi em cười, thế giới như dừng lại.
                                Chỉ cần có em bên cạnh, mọi mệt mỏi đều tan biến</p>
  </div>
  <div id="controls-container">
    <button id="toggle-controls">Bảng điều Chỉnh</button>
    <button id="toggle-fullscreen">Full màn hình</button>
    <div id="controls">
      <div class="control-group">
        <label for="colorScheme">Màu sắc tim:</label>
        <select id="colorScheme">
          <option value="rainbow">Cầu vồng</option>
          <option value="red">Đỏ</option>
          <option value="green">Xanh lá</option>
          <option value="blue">Xanh dương</option>
          <option value="monochrome">Đơn sắc</option>
          <option value="tim1_original">Hồng</option>
        </select>
      </div>
      <div class="control-group">
        <label for="floatingHeartColor">Màu tim bay:</label>
        <select id="floatingHeartColor">
          <option value="original">Hồng</option>
          <option value="red">Đỏ</option>
          <option value="green">Xanh lá</option>
          <option value="blue">Xanh dương</option>
          <option value="monochrome">Đơn sắc</option>
          <option value="rainbow">Cầu vồng</option>
        </select>
      </div>
      <div class="control-group">
        <label for="borderColorScheme">Màu sắc viền:</label>
        <select id="borderColorScheme">
          <option value="tim1_original">Hồng</option>
          <option value="rainbow">Cầu vồng</option>
          <option value="red">Đỏ</option>
          <option value="green">Xanh lá</option>
          <option value="blue">Xanh dương</option>
          <option value="monochrome">Đơn sắc</option>
        </select>
      </div>
      <div class="control-group">
        <label for="particleSize">Kích thước tim:</label>
        <input type="range" id="particleSize" min="0.05" max="0.5" step="0.01" value="0.2">
        <span id="particleSizeValue">0.2</span>
      </div>
      <div class="control-group">
        <label for="particleCount">Số tim:</label>
        <input type="range" id="particleCount" min="500" max="5000" step="100" value="3000">
        <span id="particleCountValue">3000</span>
      </div>
      <div class="control-group">
        <label for="speed">Tốc độ:</label>
        <input type="range" id="speed" min="0.0001" max="0.01" step="0.0001" value="0.05">
        <span id="speedValue">0.0005</span>
      </div>
      <div class="control-group">
        <label for="heartZoom">Thu/Phóng:</label>
        <input type="range" id="heartZoom" min="0.05" max="0.2" step="0.005" value="0.08">
        <span id="heartZoomValue">0.08</span>
      </div>
    </div>
  </div>

  <button id="startButton">Bắt đầu</button>

  <script type="x-shader/x-vertex" id="vertexShader">
    #define M_PI 3.1415926535897932384626433832795
    uniform float uTime;
    uniform float uSize;
    uniform float uHeartRadius;
    attribute float aScale;
    attribute vec3 aColor;
    attribute float random;
    attribute float random1;
    attribute float aSpeed;
    varying vec3 vColor;
    varying vec2 vUv;

    void main() {
      float sign = 2.0 * (step(random, 0.5) - 0.5);
      float t = sign * mod(-uTime * aSpeed * 0.005 + 10.0 * aSpeed * aSpeed, M_PI);
      float a = pow(t, 2.0) * pow((t - sign * M_PI), 2.0);
      float radius = uHeartRadius;
      float y_offset = -radius * 2.5; 

      vec3 heartPoint = vec3(
        radius * 16.0 * pow(sin(t), 2.0) * sin(t),
        radius * (13.0 * cos(t) - 5.0 * cos(2.0 * t) - 2.0 * cos(3.0 * t) - cos(4.0 * t)) + y_offset,
        0.15 * (a * (random1 - 0.5)) * sin(abs(10.0 * (sin(0.2 * uTime + 0.2 * random))) * t)
      );

      vec3 displacedPosition = heartPoint;
      vec4 modelPosition = modelMatrix * vec4(displacedPosition.xyz, 1.0);
      vec4 viewPosition = viewMatrix * modelPosition;
      viewPosition.xyz += position * aScale * uSize * pow(a, 0.5) * 0.5;
      gl_Position = projectionMatrix * viewPosition;

      vColor = aColor;
      vUv = uv;
    }
  </script>
  <script type="x-shader/x-fragment" id="fragmentShader">
    uniform sampler2D uTex;
    varying vec3 vColor;
    varying vec2 vUv;
    void main() {
      vec3 color = vColor;
      float alpha = texture2D(uTex, vUv).r; 

      if (alpha < 0.01) {
          discard;
      }
      gl_FragColor = vec4(color * alpha * 0.4, 1.0); 
    }
  </script>

  <script type="x-shader/x-vertex" id="vertexShader1">
    #define M_PI 3.1415926535897932384626433832795
    uniform float uTime; uniform float uSize;
    attribute float aScale; attribute vec3 aColor;
    attribute float phi; attribute float random; attribute float random1;
    varying vec3 vColor; varying vec2 vUv;
    void main() {
      float t = 0.01 * uTime + 12.0;
      float angle = phi;
      t = mod((-uTime + 100.0) * 0.06 * random1 + random * 2.0 * M_PI, 2.0 * M_PI);
      vec3 myOffset = vec3(
        5.85 * cos(angle * t),
        2.0 * (t - M_PI),
        3.0 * sin(angle * t / t)
      );
      vec4 modelPosition = modelMatrix * vec4(myOffset, 1.0);
      vec4 viewPosition = viewMatrix * modelPosition;
      viewPosition.xyz += position * aScale * uSize;
      gl_Position = projectionMatrix * viewPosition;
      vColor = aColor; vUv = uv;
    }
  </script>
  <script type="x-shader/x-fragment" id="fragmentShader1">
    uniform sampler2D uTex;
    varying vec3 vColor;
    varying vec2 vUv;
    void main() {
      vec2 uv = vUv; vec3 color = vColor;
      float strength = distance(uv, vec2(0.5, 0.65));
      strength *= 2.0; strength = 1.0 - strength;

      float alpha = texture2D(uTex, uv).r;
      if (alpha < 0.01) {
          discard;
      }
      gl_FragColor = vec4(color * (strength + 0.3) * alpha * 0.5, 1.0);
    }
  </script>

  <script type="module" src="script.js?v=24"></script>
</body>
</html>